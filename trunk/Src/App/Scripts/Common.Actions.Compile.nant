<?xml version="1.0"?>
<project name="Common.Start.BuildSolution" default="Common.Actions.Compile" xmlns="http://nant.sf.net/schemas/nant.xsd">
	<property name="Local.AssemblyPath" value="${Project.RootPath}\bin\${Project.BuildMode}\${Project.AssemblyName}"/>
	<property name="Local.SourceQuery" value="**.cs"/>
	

 	<target name="Common.Actions.Compile">
 		<echo message="CWD: ${directory::get-current-directory()}"/>
  		<echo message="Creating directory: ${Project.RootPath}\bin\${Project.BuildMode}" />
  		<echo message="Source query: ${Local.SourceQuery}" />
  		<mkdir dir="${Project.RootPath}\bin\${Project.BuildMode}"/>
  		<echo message="Compiling to: ${Local.AssemblyPath}" />
		<cd dir="${Project.RootPath}"/>
    	<csc output="${Local.AssemblyPath}" debug="${Project.BuildMode == 'Debug'}" target="library">
	      <sources>
	        <include name="**.cs" />
	      </sources>
	      <resources>
	        <include name="**.resx" />
	      </resources>
	      <references>
	        <include name="../Lib/NUnit.Framework.dll" />
	        <include name="../Lib/NLog.dll" />
	        <include name="../Lib/Db4objects.Db4o.dll" />
	        <include name="../Lib/${Project.BuildMode}/SoftwareMonkeys.SiteStarter.Configuration.dll" />
	        <include name="../Lib/${Project.BuildMode}/SoftwareMonkeys.SiteStarter.Entities.dll" />
	        <include name="../Lib/${Project.BuildMode}/SoftwareMonkeys.SiteStarter.Data.dll" />
	        <include name="../Lib/${Project.BuildMode}/SoftwareMonkeys.SiteStarter.Diagnostics.dll" />
	        <include name="../Lib/${Project.BuildMode}/SoftwareMonkeys.SiteStarter.State.dll" />
	        <include name="../${Project.BaseNamespace}.Configuration/bin/${Project.BuildMode}/${Project.BaseNamespace}.Configuration.dll" />
	        <include name="../${Project.BaseNamespace}.Entities/bin/${Project.BuildMode}/${Project.BaseNamespace}.Entities.dll" />
	        <include name="../${Project.BaseNamespace}.State/bin/${Project.BuildMode}/${Project.BaseNamespace}.State.dll" />
	        <include name="../${Project.BaseNamespace}.Data/bin/${Project.BuildMode}/${Project.BaseNamespace}.Data.dll" />
	        <include name="../${Project.BaseNamespace}.Diagnostics/bin/${Project.BuildMode}/${Project.BaseNamespace}.Diagnostics.dll" />
	        <include name="System.Configuration.dll" />
	        <include name="System.Data.dll" />
	        <include name="System.Xml.dll" />
	      </references>
	    </csc>
  	</target>

</project>
  	